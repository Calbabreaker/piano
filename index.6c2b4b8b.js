!function(t,e,n,r,i){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof o.parcelRequire3492&&o.parcelRequire3492,s=a.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(e,n){if(!s[e]){if(!t[e]){var r="function"==typeof o.parcelRequire3492&&o.parcelRequire3492;if(!n&&r)return r(e,!0);if(a)return a(e,!0);if(u&&"string"==typeof e)return u(e);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}h.resolve=function(n){return t[e][1][n]||n},h.cache={};var l=s[e]=new c.Module(e);t[e][0].call(l.exports,h,l,l.exports,this)}return s[e].exports;function h(t){return c(h.resolve(t))}}c.isParcelRequire=!0,c.Module=function(t){this.id=t,this.bundle=c,this.exports={}},c.modules=t,c.cache=s,c.parent=a,c.register=function(e,n){t[e]=[function(t,e){e.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return o.parcelRequire3492}}),o.parcelRequire3492=c;for(var l=0;l<e.length;l++)c(e[l]);var h=c(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=h:"function"==typeof define&&define.amd&&define((function(){return h}))}({"3syrK":[function(t,e,n){new(t("./scripts/piano").Piano)("A0","C8")},{"./scripts/piano":"1DTtL"}],"1DTtL":[function(t,e,n){var r=t("@parcel/transformer-js/lib/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"Piano",(function(){return u}));var i=t("./notes"),o=t("./control_panel"),a=t("./dom_utils"),s=t("./midi_player");class u{activeNoteMap=new Map;mouseIsDown=!1;midiPlayer=new s.MidiPlayer(this.pressNote.bind(this));controlPanel=new o.ControlPanel(this.midiPlayer);get instrument(){return this.controlPanel.instrument}constructor(t,e){window.addEventListener("mousedown",(()=>{this.mouseIsDown=!0})),window.addEventListener("mouseup",(()=>{this.mouseIsDown=!1,this.stopAllNotes()})),window.addEventListener("keydown",(t=>{const e=i.keyBinds[t.code];e&&(this.playNote(e),t.shiftKey||t.preventDefault())})),window.addEventListener("keyup",(t=>{const e=i.keyBinds[t.code];e&&this.stopNote(e)})),this.createDOM(t,e)}playNote(t,e=!0,n=1){if(this.activeNoteMap.has(t))return;const r=i.getOctave(t)+(e?this.controlPanel.octaveShift:0),o=i.getNoteName(t)+r,a=document.querySelector(`[data-note~="${o}"]`);if(a){let e;a.classList.add("pressed"),this.instrument&&(e=this.instrument.play(o,void 0,{gain:this.controlPanel.volume*n})),this.activeNoteMap.set(t,{audioNode:e,key:a})}}stopNote(t){const e=this.activeNoteMap.get(t);e&&(e.key.classList.remove("pressed"),this.activeNoteMap.delete(t),!this.controlPanel.sustain&&this.instrument&&e.audioNode&&e.audioNode.stop())}pressNote(t,e,n){this.playNote(t,!0,n),setTimeout((()=>this.stopNote(t)),e)}stopAllNotes(){document.querySelectorAll(".pressed").forEach((t=>{t.classList.remove("pressed")})),!this.controlPanel.sustain&&this.instrument&&(this.instrument.stop(),this.activeNoteMap.clear())}createDOM(t,e){const n=a.htmlToElement('<div class="piano"/>');a.mainElm.appendChild(n);const{notes:r,whiteKeys:o}=i.generateNotesFromRange(t,e);n.style.setProperty("--white-keys",o.toString()),r.forEach((t=>{const e=1===i.getNoteName(t).length,r=a.htmlToElement(`<div class="key ${e?"white":"black"}" data-note="${t}"/>`);r.onmousedown=()=>this.playNote(t,!1),r.onmouseup=()=>this.stopNote(t),r.onmouseenter=()=>this.mouseIsDown&&this.playNote(t,!1),r.onmouseleave=()=>this.stopNote(t),n.appendChild(r)}))}}},{"./notes":"1Wzm3","./control_panel":"4zHno","./dom_utils":"6cwiE","./midi_player":"3rmYy","@parcel/transformer-js/lib/esmodule-helpers.js":"5gA8y"}],"1Wzm3":[function(t,e,n){var r=t("@parcel/transformer-js/lib/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"noteNames",(function(){return i})),r.export(n,"keyBinds",(function(){return o})),r.export(n,"getOctave",(function(){return a})),r.export(n,"getNoteName",(function(){return s})),r.export(n,"generateNotesFromRange",(function(){return u})),r.export(n,"midiToNote",(function(){return c}));const i=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],o={Backquote:"Bb2",Tab:"B2",KeyQ:"C3",Digit2:"Db3",KeyW:"D3",Digit3:"Eb3",KeyE:"E3",KeyR:"F3",Digit5:"Gb3",KeyT:"G3",Digit6:"Ab3",KeyY:"A3",Digit7:"Bb3",KeyU:"B3",KeyI:"C4",Digit9:"Db4",KeyO:"D4",Digit0:"Eb4",KeyP:"E4",BracketLeft:"F4",Equal:"Gb4",BracketRight:"G4",Backspace:"Ab4",Backslash:"A4",ShiftLeft:"A4",Enter:"B4",KeyA:"Bb4",KeyZ:"B4",KeyX:"C5",KeyD:"Db5",KeyC:"D5",KeyF:"Eb5",KeyV:"E5",KeyB:"F5",KeyH:"Gb5",KeyN:"G5",KeyJ:"Ab5",KeyM:"A5",KeyK:"Bb5",Comma:"B5",Period:"C6",Semicolon:"Db6",Slash:"D6",Quote:"Eb6",ShiftRight:"E6"};function a(t){return parseInt(t.charAt(t.length-1))}function s(t){return t.substring(0,t.length-1)}function u(t,e){const n=a(e),r=a(t),o=i.indexOf(s(t)),u=i.indexOf(s(e)),c=[];let l=0;for(let t=r;t<=n;t++){let e=t===r?o:0;for(;e<i.length;){if(t===n&&e>u)break;const r=i[e];c.push(r+t),1===r.length&&l++,e++}}return{notes:c,whiteKeys:l}}function c(t){const e=Math.floor(t/12)-1;return i[t%12]+e}},{"@parcel/transformer-js/lib/esmodule-helpers.js":"5gA8y"}],"5gA8y":[function(t,e,n){"use strict";n.interopDefault=function(t){return t&&t.__esModule?t:{default:t}},n.defineInteropFlag=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.exportAll=function(t,e){return Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))})),e},n.export=function(t,e,n){Object.defineProperty(t,e,{enumerable:!0,get:n})}},{}],"4zHno":[function(t,e,n){var r=t("@parcel/transformer-js/lib/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"ControlPanel",(function(){return s}));var i=t("soundfont-player"),o=t("./dom_utils"),a=t("./instrument_names");class s{_sustain=!1;_volume=25;_octaveShift=0;_instrumentName="acoustic_grand_piano";get sustain(){return this._sustain}set sustain(t){this._sustain=t,this.sustainInput.checked=t}get volume(){return this._volume}set volume(t){this._volume=t,this.volumeDisplay.textContent=t.toString()}get octaveShift(){return this._octaveShift}set octaveShift(t){this._octaveShift=t,this.octaveShiftSelect.value=t.toString()}get instrumentName(){return this._instrumentName}set instrumentName(t){this._instrumentName=t,this.instrument=null,this.instrumentStatus.textContent=" Loading...",i.instrument(this.audioContext,t).then((t=>{this.instrument=t,this.instrumentStatus.textContent=""}))}audioContext=new AudioContext;instrument=null;constructor(t){this.midiPlayer=t,this.panel=o.htmlToElement('<div class="control-panel"/>'),o.mainElm.appendChild(this.panel);const e=o.htmlToElement("<div><span>Sustain (s): </span></div>");this.panel.appendChild(e),this.sustainInput=o.htmlToElement('<input type="checkbox"></input>'),this.sustainInput.onchange=()=>this._sustain=this.sustainInput.checked,e.appendChild(this.sustainInput);const n=o.htmlToElement("<div><span>Octave Shift (- ctrl, + alt): </span></div>");this.panel.appendChild(n),this.octaveShiftSelect=document.createElement("select"),this.octaveShiftSelect.onchange=()=>this._octaveShift=parseInt(this.octaveShiftSelect.value),n.appendChild(this.octaveShiftSelect);for(let t=-3;t<=3;t++){const e=o.htmlToElement(`<option>${t}</option>`);this.octaveShiftSelect.appendChild(e)}const r=o.htmlToElement("<div><span>Volume: </span></div>");this.panel.appendChild(r);const i=o.htmlToElement(`<input type="range" min="0" max="50" value="${this.volume}">`);i.onchange=()=>this.volume=parseFloat(i.value),r.appendChild(i),this.volumeDisplay=document.createElement("span"),r.appendChild(this.volumeDisplay);const s=o.htmlToElement("<div><span>Instrument: </span></div>");this.panel.appendChild(s);const u=document.createElement("select");u.onchange=()=>this.instrumentName=u.value,s.appendChild(u),this.instrumentStatus=document.createElement("span"),s.appendChild(this.instrumentStatus),a.instrumentNames.forEach(((t,e)=>{const n=o.htmlToElement(`<option>${t}</option>`);u.appendChild(n),t===this._instrumentName&&(u.selectedIndex=e)}));const c=o.htmlToElement("<div><p>Play a midi file: </p></div>");this.panel.appendChild(c),this.midiFileInput=o.htmlToElement('<input type="file"/>'),this.midiFileInput.onchange=()=>this.midiPlayer.setMidiFile(this.midiFileInput.files?.[0]),c.appendChild(this.midiFileInput),c.appendChild(document.createElement("br")),this.playStopButton=o.htmlToElement("<button>Play</button>"),this.playStopButton.onclick=()=>this.playMidi(),c.appendChild(this.playStopButton);const l=o.htmlToElement("<button>Reset</button>");l.onclick=()=>{this.stopMidi(),this.midiPlayer.reset()},c.appendChild(l),this.sustain=this._sustain,this.octaveShift=this._octaveShift,this.volume=this._volume,this.instrumentName=this._instrumentName,window.addEventListener("keydown",(t=>{"KeyS"===t.code&&(this.sustain=!this.sustain);let e=this.octaveShift;"ControlLeft"===t.code&&(e-=1),"AltLeft"===t.code&&(e+=1),e!==this.octaveShift&&(e<-3&&(e=3),e>3&&(e=-3),this.octaveShift=e)}))}playMidi(){this.playStopButton.textContent="Stop",this.playStopButton.onclick=()=>this.stopMidi(),this.midiPlayer.resume()}stopMidi(){this.playStopButton.textContent="Play",this.playStopButton.onclick=()=>this.playMidi(),this.midiPlayer.pause()}}},{"soundfont-player":"7IOtV","./dom_utils":"6cwiE","./instrument_names":"2PYG4","@parcel/transformer-js/lib/esmodule-helpers.js":"5gA8y"}],"7IOtV":[function(t,e,n){"use strict";var r=t("audio-loader"),i=t("sample-player");function o(t){return/\.js(\?.*)?$/i.test(t)}function a(t,e,n){return"https://gleitz.github.io/midi-js-soundfonts/"+(e="FluidR3_GM"===e?e:"MusyngKite")+"/"+t+"-"+(n="ogg"===n?n:"mp3")+".js"}var s=t("./legacy");s.instrument=function t(e,n,s){if(1===arguments.length)return function(n,r){return t(e,n,r)};var u=s||{},c=u.isSoundfontURL||o,l=u.nameToUrl||a,h=c(n)?n:l(n,u.soundfont,u.format);return r(e,h,{only:u.only||u.notes}).then((function(t){var r=i(e,t,u).connect(u.destination?u.destination:e.destination);return r.url=h,r.name=n,r}))},s.nameToUrl=a,"object"==typeof e&&e.exports&&(e.exports=s),"undefined"!=typeof window&&(window.Soundfont=s)},{"audio-loader":"5iuDo","sample-player":"6Ot3L","./legacy":"5DhFd"}],"5iuDo":[function(t,e,n){"use strict";var r=t("./base64"),i=t("./fetch");function o(t){return function(e){return"string"==typeof e&&t.test(e)}}function a(t,e){return"string"==typeof t?t+e:"function"==typeof t?t(e):e}function s(t,e,n,r){var i=e instanceof ArrayBuffer?u:c(e)?l:function(t){return t&&"function"==typeof t.then}(e)?h:f(e)?p:function(t){return t&&"object"==typeof t}(e)?d:m(e)?y:g(e)?b:v(e)?w:null;return i?i(t,e,n||{}):r?Promise.resolve(r):Promise.reject("Source not valid ("+e+")")}function u(t,e,n){return new Promise((function(n,r){t.decodeAudioData(e,(function(t){n(t)}),(function(){r("Can't decode audio data ("+e.slice(0,30)+"...)")}))}))}s.fetch=i;var c=o(/\.(mp3|wav|ogg)(\?.*)?$/i);function l(t,e,n){var r=a(n.from,e);return s(t,s.fetch(r,"arraybuffer"),n)}function h(t,e,n){return e.then((function(e){return s(t,e,n)}))}var f=Array.isArray;function p(t,e,n){return Promise.all(e.map((function(e){return s(t,e,n,e)})))}function d(t,e,n){var r={},i=Object.keys(e).map((function(i){if(n.only&&-1===n.only.indexOf(i))return null;var o=e[i];return s(t,o,n,o).then((function(t){r[i]=t}))}));return Promise.all(i).then((function(){return r}))}var m=o(/\.json(\?.*)?$/i);function y(t,e,n){var r=a(n.from,e);return s(t,s.fetch(r,"text").then(JSON.parse),n)}var g=o(/^data:audio/);function b(t,e,n){var i=e.indexOf(",");return s(t,r.decode(e.slice(i+1)).buffer,n)}var v=o(/\.js(\?.*)?$/i);function w(t,e,n){var r=a(n.from,e);return s(t,s.fetch(r,"text").then(k),n)}function k(t){var e=t.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format");e=t.indexOf("=",e)+2;var n=t.lastIndexOf(",");return JSON.parse(t.slice(e,n)+"}")}"object"==typeof e&&e.exports&&(e.exports=s),"undefined"!=typeof window&&(window.loadAudio=s)},{"./base64":"6RhQ4","./fetch":"35OLG"}],"6RhQ4":[function(t,e,n){"use strict";e.exports={decode:function(t,e){for(var n,r,i,o=t.replace(/[^A-Za-z0-9\+\/]/g,""),a=o.length,s=e?Math.ceil((3*a+1>>2)/e)*e:3*a+1>>2,u=new Uint8Array(s),c=0,l=0,h=0;h<a;h++)if(r=3&h,c|=((i=o.charCodeAt(h))>64&&i<91?i-65:i>96&&i<123?i-71:i>47&&i<58?i+4:43===i?62:47===i?63:0)<<18-6*r,3===r||a-h==1){for(n=0;n<3&&l<s;n++,l++)u[l]=c>>>(16>>>n&24)&255;c=0}return u}}},{}],"35OLG":[function(t,e,n){"use strict";e.exports=function(t,e){return new Promise((function(n,r){var i=new XMLHttpRequest;e&&(i.responseType=e),i.open("GET",t),i.onload=function(){200===i.status?n(i.response):r(Error(i.statusText))},i.onerror=function(){r(Error("Network Error"))},i.send()}))}},{}],"6Ot3L":[function(t,e,n){"use strict";var r=t("./player"),i=t("./events"),o=t("./notes"),a=t("./scheduler"),s=t("./midi");function u(t,e,n){return s(a(o(i(r(t,e,n)))))}"object"==typeof e&&e.exports&&(e.exports=u),"undefined"!=typeof window&&(window.SamplePlayer=u)},{"./player":"vkxdh","./events":"4Y2xk","./notes":"OOPzj","./scheduler":"5l461","./midi":"aeuep"}],vkxdh:[function(t,e,n){"use strict";var r=t("adsr"),i={},o={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function a(t){return"number"==typeof t}var s=["attack","decay","sustain","release"];e.exports=function(t,e,n){var u=!1,c=0,l={},h=t.createGain();h.gain.value=1;var f=Object.assign({},o,n),p={context:t,out:h,opts:f};return e instanceof AudioBuffer?p.buffer=e:p.buffers=e,p.start=function(e,n,r){if(p.buffer&&null!==e)return p.start(null,e,n);var o=e?p.buffers[e]:p.buffer;if(o){if(u){var a=r||i;n=Math.max(t.currentTime,n||0),p.emit("start",n,e,a);var s=d(e,o,a);return s.id=function(e,n){return n.id=c++,l[n.id]=n,n.source.onended=function(){var e=t.currentTime;n.source.disconnect(),n.env.disconnect(),n.disconnect(),p.emit("ended",e,n.id,n)},n.id}(0,s),s.env.start(n),s.source.start(n),p.emit("started",n,s.id,s),a.duration&&s.stop(n+a.duration),s}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+e+" not found.")},p.play=function(t,e,n){return p.start(t,e,n)},p.stop=function(t,e){var n;return(e=e||Object.keys(l)).map((function(e){return(n=l[e])?(n.stop(t),n.id):null}))},p.connect=function(t){return u=!0,h.connect(t),p},p.emit=function(t,e,n,r){p.onevent&&p.onevent(t,e,n,r);var i=p["on"+t];i&&i(e,n,r)},p;function d(e,n,i){var o,u=t.createGain();return u.gain.value=0,u.connect(h),u.env=function(t,e,n){var i=r(t),o=e.adsr||n.adsr;return s.forEach((function(t,r){i[t]=o?o[r]:e[t]||n[t]})),i.value.value=a(e.gain)?e.gain:a(n.gain)?n.gain:1,i}(t,i,f),u.env.connect(u.gain),u.source=t.createBufferSource(),u.source.buffer=n,u.source.connect(u),u.source.loop=i.loop||f.loop,u.source.playbackRate.value=(o=i.cents||f.cents)?Math.pow(2,o/1200):1,u.source.loopStart=i.loopStart||f.loopStart,u.source.loopEnd=i.loopEnd||f.loopEnd,u.stop=function(n){var r=n||t.currentTime;p.emit("stop",r,e);var i=u.env.stop(r);u.source.stop(i)},u}}},{adsr:"1ie9C"}],"1ie9C":[function(t,e,n){e.exports=function(t){var e=t.createGain(),n=e._voltage=function(t){var e=t.createBufferSource(),n=t.createBuffer(1,2,t.sampleRate);return n.getChannelData(0).set(i),e.buffer=n,e.loop=!0,e}(t),a=o(n),s=o(n),u=o(n);return e._startAmount=o(s),e._endAmount=o(u),e._multiplier=o(a),e._multiplier.connect(e),e._startAmount.connect(e),e._endAmount.connect(e),e.value=a.gain,e.startValue=s.gain,e.endValue=u.gain,e.startValue.value=0,e.endValue.value=0,Object.defineProperties(e,r),e};var r={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(t){var e=this._multiplier.gain,n=this._startAmount.gain,r=this._endAmount.gain;this._voltage.start(t),this._decayFrom=this._decayFrom=t+this.attack,this._startedAt=t;var i=this.sustain;e.cancelScheduledValues(t),n.cancelScheduledValues(t),r.cancelScheduledValues(t),r.setValueAtTime(0,t),this.attack?(e.setValueAtTime(0,t),e.linearRampToValueAtTime(1,t+this.attack),n.setValueAtTime(1,t),n.linearRampToValueAtTime(0,t+this.attack)):(e.setValueAtTime(1,t),n.setValueAtTime(0,t)),this.decay&&e.setTargetAtTime(i,this._decayFrom,a(this.decay))}},stop:{value:function(t,e){e&&(t-=this.release);var n=t+this.release;if(this.release){var r=this._multiplier.gain,i=this._startAmount.gain,o=this._endAmount.gain;r.cancelScheduledValues(t),i.cancelScheduledValues(t),o.cancelScheduledValues(t);var s=a(this.release);if(this.attack&&t<this._decayFrom){var u=function(t,e,n,r,i){var o=t+(i-n)/(r-n)*(e-t);o<=t&&(o=t);o>=e&&(o=e);return o}(0,1,this._startedAt,this._decayFrom,t);r.linearRampToValueAtTime(u,t),i.linearRampToValueAtTime(1-u,t),i.setTargetAtTime(0,t,s)}o.setTargetAtTime(1,t,s),r.setTargetAtTime(0,t,s)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(t){this._voltage.onended=t}}},i=new Float32Array([1,1]);function o(t){var e=t.context.createGain();return t.connect(e),e}function a(t){return Math.log(t+1)/Math.log(100)}},{}],"4Y2xk":[function(t,e,n){function r(t,e){return function(n,r,i,o){t(n,r,i,o),e(n,r,i,o)}}e.exports=function(t){return t.on=function(e,n){if(1===arguments.length&&"function"==typeof e)return t.on("event",e);var i="on"+e,o=t[i];return t[i]=o?r(o,n):n,t},t}},{}],OOPzj:[function(t,e,n){"use strict";var r=t("note-parser"),i=function(t){return function(t){return null!==t&&t!==[]&&t>=0&&t<129}(t)?+t:r.midi(t)};e.exports=function(t){if(t.buffers){var e=t.opts.map,n="function"==typeof e?e:i,r=function(t){return t?n(t)||t:null};t.buffers=function(t,e){return Object.keys(t).reduce((function(n,r){return n[e(r)]=t[r],n}),{})}(t.buffers,r);var o=t.start;t.start=function(t,e,n){var i=r(t),a=i%1;return a&&(i=Math.floor(i),n=Object.assign(n||{},{cents:Math.floor(100*a)})),o(i,e,n)}}return t}},{"note-parser":"5AhLA"}],"5AhLA":[function(t,e,n){"use strict";var r=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;var i=[0,2,4,5,7,9,11];function o(t,e,n){if("string"!=typeof t)return null;var o=r.exec(t);if(!o||!e&&o[4])return null;var s={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return s.pc=s.letter+s.acc,s.step=(s.letter.charCodeAt(0)+3)%7,s.alt="b"===s.acc[0]?-s.acc.length:s.acc.length,s.chroma=i[s.step]+s.alt,o[3]&&(s.oct=+o[3],s.midi=s.chroma+12*(s.oct+1),s.freq=a(s.midi,n)),e&&(s.tonicOf=o[4]),s}function a(t,e){return Math.pow(2,(t-69)/12)*(e||440)}var s={parse:o,regex:function(){return r},midiToFreq:a};["letter","acc","pc","step","alt","chroma","oct","midi","freq"].forEach((function(t){s[t]=function(e){var n=o(e);return n&&void 0!==n[t]?n[t]:null}})),e.exports=s},{}],"5l461":[function(t,e,n){"use strict";var r=Array.isArray,i={};e.exports=function(t){return t.schedule=function(e,n){var o,a,s,u,c=t.context.currentTime,l=e<c?c:e;return t.emit("schedule",l,n),n.map((function(e){return e?(r(e)?(o=e[0],a=e[1]):(o=e.time,a=e),!function(t){return t&&"object"==typeof t}(a)?(s=a,u=i):(s=a.name||a.key||a.note||a.midi||null,u=a),t.start(s,l+(o||0),u)):null}))},t}},{}],aeuep:[function(t,e,n){var r=t("midimessage");e.exports=function(t){return t.listenToMidi=function(e,n){var i={},o=n||{},a=o.gain||function(t){return t/127};return e.onmidimessage=function(e){var n=e.messageType?e:r(e);if("noteon"===n.messageType&&0===n.velocity&&(n.messageType="noteoff"),!o.channel||n.channel===o.channel)switch(n.messageType){case"noteon":i[n.key]=t.play(n.key,0,{gain:a(n.velocity)});break;case"noteoff":i[n.key]&&(i[n.key].stop(),delete i[n.key])}},t},t}},{midimessage:"44wGX"}],"44wGX":[function(t,e,n){var r,i=arguments[3];!function(t){if("object"==typeof n&&void 0!==e)e.exports=t();else if("function"==typeof r&&r.amd)r([],t);else{("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this).midimessage=t()}}((function(){return function e(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[s]={exports:{}};n[s][0].call(h.exports,(function(t){var e=n[s][1][t];return o(e||t)}),h,h.exports,e,n,r,i)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return new function(t){if(this._event=t,this._data=t.data,this.receivedTime=t.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&t.data[0],this.channel=15&t.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 144:this.messageType="noteon",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 160:this.messageType="keypressure",this.key=127&t.data[1],this.pressure=127&t.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&t.data[1],this.controllerValue=127&t.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=t.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&t.data[1];break;case 224:this.messageType="pitchbendchange";var e=127&t.data[2],n=127&t.data[1];this.pitchBend=(e<<8)+n}}(t)},e.exports=n.default},{}]},{},[1])(1)}))},{}],"5DhFd":[function(t,e,n){"use strict";var r=t("note-parser");function i(t,e){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof i))return new i(t);this.nameToUrl=e||i.nameToUrl,this.ctx=t,this.instruments={},this.promises=[]}function o(t,e){return e=e||{},function(n,i,o,a){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var s=n>0&&n<129?+n:r.midi(n),u=s?r.midiToFreq(s,440):null;if(u){o=o||.2;var c=(a=a||{}).destination||e.destination||t.destination,l=a.vcoType||e.vcoType||"sine",h=a.gain||e.gain||.4,f=t.createOscillator();f.type=l,f.frequency.value=u;var p=t.createGain();return p.gain.value=h,f.connect(p),p.connect(c),f.start(i),o>0&&f.stop(i+o),f}}}i.prototype.onready=function(t){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(t)},i.prototype.instrument=function(t,e){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var n=this.ctx;if((t=t||"default")in this.instruments)return this.instruments[t];var r={name:t,play:o(n,e)};if(this.instruments[t]=r,"default"!==t){var a=i.instrument(n,t,e).then((function(t){return r.play=t.play,r}));this.promises.push(a),r.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),a.then(t)}}else r.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),t()};return r},i.loadBuffers=function(t,e,n){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),i.instrument(t,e,n).then((function(t){return t.buffers}))},i.noteToMidi=r.midi,e.exports=i},{"note-parser":"3dbbK"}],"3dbbK":[function(t,e,n){var r;r=this,function(t){"use strict";function e(t,e){return Array(e+1).join(t)}function n(t){return"number"==typeof t}function r(t,e){return Math.pow(2,(t-69)/12)*(e||440)}function i(t,e,n){if("string"!=typeof t)return null;var i=u.exec(t);if(!i||!e&&i[4])return null;var o={letter:i[1].toUpperCase(),acc:i[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length;var a=c[o.step]+o.alt;return o.chroma=a<0?12+a:a%12,i[3]&&(o.oct=+i[3],o.midi=a+12*(o.oct+1),o.freq=r(o.midi,n)),e&&(o.tonicOf=i[4]),o}function o(t){return n(t)?t<0?e("b",-t):e("#",t):""}function a(t){return n(t)?""+t:""}function s(t){if((n(t)||function(t){return"string"==typeof t}(t))&&t>=0&&t<128)return+t;var e=i(t);return e&&function(t){return void 0!==t}(e.midi)?e.midi:null}var u=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,c=[0,2,4,5,7,9,11],l="CDEFGAB";t.regex=function(){return u},t.parse=i,t.build=function t(e,n,r){return null==e?null:e.step?t(e.step,e.alt,e.oct):e<0||e>6?null:l.charAt(e)+o(n)+a(r)},t.midi=s,t.freq=function(t,e){var n=s(t);return null===n?null:r(n,e)},t.letter=function(t){return(i(t)||{}).letter},t.acc=function(t){return(i(t)||{}).acc},t.pc=function(t){return(i(t)||{}).pc},t.step=function(t){return(i(t)||{}).step},t.alt=function(t){return(i(t)||{}).alt},t.chroma=function(t){return(i(t)||{}).chroma},t.oct=function(t){return(i(t)||{}).oct}}("object"==typeof n&&void 0!==e?n:r.NoteParser=r.NoteParser||{})},{}],"6cwiE":[function(t,e,n){var r=t("@parcel/transformer-js/lib/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"mainElm",(function(){return i})),r.export(n,"htmlToElement",(function(){return o}));const i=document.querySelector("main");function o(t){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}},{"@parcel/transformer-js/lib/esmodule-helpers.js":"5gA8y"}],"2PYG4":[function(t,e,n){var r=t("@parcel/transformer-js/lib/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"instrumentNames",(function(){return i}));const i=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"]},{"@parcel/transformer-js/lib/esmodule-helpers.js":"5gA8y"}],"3rmYy":[function(t,e,n){var r=t("@parcel/transformer-js/lib/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"MidiPlayer",(function(){return a}));var i=t("@tonejs/midi"),o=t("./notes");class a{midiToPlay=null;midiPaused=!0;trackIndexUpToArray=[];timeStarted=null;timestampPaused=0;amountOftimePaused=0;constructor(t){this.pressNoteFunc=t}setMidiFile(t){if(!t)return void(this.midiToPlay=null);const e=new FileReader;e.onload=()=>this.midiToPlay=new i.Midi(e.result),e.readAsArrayBuffer(t)}update(){!this.midiPaused&&this.midiToPlay&&(this.midiToPlay.tracks.forEach(((t,e)=>{const n=this.trackIndexUpToArray[e];if(n>=t.notes.length)return;const r=t.notes[n],i=performance.now()-(this.timeStarted??0)-this.amountOftimePaused-1e3*r.time;if(i>0){const t=o.midiToNote(r.midi);i<100&&this.pressNoteFunc(t,1e3*r.duration,r.velocity),this.trackIndexUpToArray[e]++}})),requestAnimationFrame(this.update.bind(this)))}pause(){this.timestampPaused=performance.now(),this.midiPaused=!0}resume(){if(!this.midiToPlay)return alert("No midi file selected!");null==this.timeStarted?this.reset():this.amountOftimePaused+=performance.now()-this.timestampPaused,this.midiPaused=!1,this.update()}reset(){this.midiToPlay&&(this.trackIndexUpToArray=new Array(this.midiToPlay.tracks.length).fill(0),this.timeStarted=performance.now(),this.amountOftimePaused=0)}}},{"@tonejs/midi":"6HBJp","./notes":"1Wzm3","@parcel/transformer-js/lib/esmodule-helpers.js":"5gA8y"}],"6HBJp":[function(t,e,n){!function(t,r){if("object"==typeof n&&"object"==typeof e)e.exports=r();else{var i=r();for(var o in i)("object"==typeof n?n:t)[o]=i[o]}}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=new WeakMap;e.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var o=function(){function t(t){var n=this;this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",i.set(this,480),t&&(i.set(this,t.header.ticksPerBeat),t.tracks.forEach((function(t){return t.forEach((function(t){t.meta&&("timeSignature"===t.type?n.timeSignatures.push({ticks:t.absoluteTime,timeSignature:[t.numerator,t.denominator]}):"setTempo"===t.type?n.tempos.push({bpm:6e7/t.microsecondsPerBeat,ticks:t.absoluteTime}):"keySignature"===t.type&&n.keySignatures.push({key:e.keySignatureKeys[t.key+7],scale:0===t.scale?"major":"minor",ticks:t.absoluteTime}))}))})),t.tracks[0].forEach((function(t){t.meta&&("trackName"===t.type?n.name=t.text:"text"!==t.type&&"cuePoint"!==t.type&&"marker"!==t.type&&"lyrics"!==t.type||n.meta.push({text:t.text,ticks:t.absoluteTime,type:t.type}))})),this.update())}return t.prototype.update=function(){var t=this,e=0,n=0;this.tempos.sort((function(t,e){return t.ticks-e.ticks})),this.tempos.forEach((function(r,i){var o=i>0?t.tempos[i-1].bpm:t.tempos[0].bpm,a=r.ticks/t.ppq-n,s=60/o*a;r.time=s+e,e=r.time,n+=a})),this.timeSignatures.sort((function(t,e){return t.ticks-e.ticks})),this.timeSignatures.forEach((function(e,n){var r=n>0?t.timeSignatures[n-1]:t.timeSignatures[0],i=(e.ticks-r.ticks)/t.ppq/r.timeSignature[0]/(r.timeSignature[1]/4);r.measures=r.measures||0,e.measures=i+r.measures}))},t.prototype.ticksToSeconds=function(t){var e=r.search(this.tempos,t);if(-1!==e){var n=this.tempos[e],i=n.time,o=(t-n.ticks)/this.ppq;return i+60/n.bpm*o}return t/this.ppq*.5},t.prototype.ticksToMeasures=function(t){var e=r.search(this.timeSignatures,t);if(-1!==e){var n=this.timeSignatures[e],i=(t-n.ticks)/this.ppq;return n.measures+i/(n.timeSignature[0]/n.timeSignature[1])/4}return t/this.ppq/4},Object.defineProperty(t.prototype,"ppq",{get:function(){return i.get(this)},enumerable:!0,configurable:!0}),t.prototype.secondsToTicks=function(t){var e=r.search(this.tempos,t,"time");if(-1!==e){var n=this.tempos[e],i=(t-n.time)/(60/n.bpm);return Math.round(n.ticks+i*this.ppq)}var o=t/.5;return Math.round(o*this.ppq)},t.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map((function(t){return{bpm:t.bpm,ticks:t.ticks}})),timeSignatures:this.timeSignatures}},t.prototype.fromJSON=function(t){this.name=t.name,this.tempos=t.tempos.map((function(t){return Object.assign({},t)})),this.timeSignatures=t.timeSignatures.map((function(t){return Object.assign({},t)})),this.keySignatures=t.keySignatures.map((function(t){return Object.assign({},t)})),this.meta=t.meta.map((function(t){return Object.assign({},t)})),i.set(this,t.ppq),this.update()},t.prototype.setTempo=function(t){this.tempos=[{bpm:t,ticks:0}],this.update()},t}();e.Header=o},function(t,e,n){e.parseMidi=n(6),e.writeMidi=n(7)},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n="ticks");var r=0,i=t.length,o=i;if(i>0&&t[i-1][n]<=e)return i-1;for(;r<o;){var a=Math.floor(r+(o-r)/2),s=t[a],u=t[a+1];if(s[n]===e){for(var c=a;c<t.length;c++)t[c][n]===e&&(a=c);return a}if(s[n]<e&&u[n]>e)return a;s[n]>e?o=a:s[n]<e&&(r=a+1)}return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.search=r,e.insert=function(t,e,n){if(void 0===n&&(n="ticks"),t.length){var i=r(t,e[n],n);t.splice(i+1,0,e)}else t.push(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(4),o=n(10),a=n(11),s=n(12),u=n(14),c=new WeakMap,l=function(){function t(t,e){var n=this;if(this.name="",this.notes=[],this.controlChanges=o.createControlChanges(),this.pitchBends=[],c.set(this,e),t){var r=t.find((function(t){return"trackName"===t.type}));this.name=r?r.text:""}if(this.instrument=new s.Instrument(t,this),this.channel=0,t){for(var i=t.filter((function(t){return"noteOn"===t.type})),a=t.filter((function(t){return"noteOff"===t.type})),u=function(){var t=i.shift();l.channel=t.channel;var e=a.findIndex((function(e){return e.noteNumber===t.noteNumber&&e.absoluteTime>=t.absoluteTime}));if(-1!==e){var n=a.splice(e,1)[0];l.addNote({durationTicks:n.absoluteTime-t.absoluteTime,midi:t.noteNumber,noteOffVelocity:n.velocity/127,ticks:t.absoluteTime,velocity:t.velocity/127})}},l=this;i.length;)u();t.filter((function(t){return"controller"===t.type})).forEach((function(t){n.addCC({number:t.controllerType,ticks:t.absoluteTime,value:t.value/127})})),t.filter((function(t){return"pitchBend"===t.type})).forEach((function(t){n.addPitchBend({ticks:t.absoluteTime,value:t.value/Math.pow(2,13)})}));var h=t.find((function(t){return"endOfTrack"===t.type}));this.endOfTrackTicks=void 0!==h?h.absoluteTime:void 0}}return t.prototype.addNote=function(t){var e=c.get(this),n=new u.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},e);return Object.assign(n,t),r.insert(this.notes,n,"ticks"),this},t.prototype.addCC=function(t){var e=c.get(this),n=new i.ControlChange({controllerType:t.number},e);return delete t.number,Object.assign(n,t),Array.isArray(this.controlChanges[n.number])||(this.controlChanges[n.number]=[]),r.insert(this.controlChanges[n.number],n,"ticks"),this},t.prototype.addPitchBend=function(t){var e=c.get(this),n=new a.PitchBend({},e);return Object.assign(n,t),r.insert(this.pitchBends,n,"ticks"),this},Object.defineProperty(t.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,e=0;e<this.notes.length-1;e++){var n=this.notes[e].time+this.notes[e].duration;t<n&&(t=n)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var t=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,e=0;e<this.notes.length-1;e++){var n=this.notes[e].ticks+this.notes[e].durationTicks;t<n&&(t=n)}return t},enumerable:!0,configurable:!0}),t.prototype.fromJSON=function(t){var e=this;for(var n in this.name=t.name,this.channel=t.channel,this.instrument=new s.Instrument(void 0,this),this.instrument.fromJSON(t.instrument),void 0!==t.endOfTrackTicks&&(this.endOfTrackTicks=t.endOfTrackTicks),t.controlChanges)t.controlChanges[n]&&t.controlChanges[n].forEach((function(t){e.addCC({number:t.number,ticks:t.ticks,value:t.value})}));t.notes.forEach((function(t){e.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})}))},t.prototype.toJSON=function(){for(var t={},e=0;e<127;e++)this.controlChanges.hasOwnProperty(e)&&(t[e]=this.controlChanges[e].map((function(t){return t.toJSON()})));var n={channel:this.channel,controlChanges:t,pitchBends:this.pitchBends.map((function(t){return t.toJSON()})),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map((function(t){return t.toJSON()}))};return void 0!==this.endOfTrackTicks&&(n.endOfTrackTicks=this.endOfTrackTicks),n},t}();e.Track=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},e.controlChangeIds=Object.keys(e.controlChangeNames).reduce((function(t,n){return t[e.controlChangeNames[n]]=n,t}),{});var r=new WeakMap,i=new WeakMap,o=function(){function t(t,e){r.set(this,e),i.set(this,t.controllerType),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"number",{get:function(){return i.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return e.controlChangeNames[this.number]?e.controlChangeNames[this.number]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},t}();e.ControlChange=o},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(8),s=n(0),u=n(3),c=function(){function t(t){var e=this,n=null;t&&(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(n=o.parseMidi(t)).tracks.forEach((function(t){var e=0;t.forEach((function(t){e+=t.deltaTime,t.absoluteTime=e}))})),n.tracks=function(t){for(var e=[],n=0;n<t.length;n++)for(var r=e.length,i=new Map,o=Array(16).fill(0),a=0,s=t[n];a<s.length;a++){var u=s[a],c=r,l=u.channel;if(void 0!==l){"programChange"===u.type&&(o[l]=u.programNumber);var h=o[l]+" "+l;i.has(h)?c=i.get(h):(c=r+i.size,i.set(h,c))}e[c]||e.push([]),e[c].push(u)}return e}(n.tracks)),this.header=new s.Header(n),this.tracks=[],t&&(this.tracks=n.tracks.map((function(t){return new u.Track(t,e.header)})),1===n.header.format&&0===this.tracks[0].duration&&this.tracks.shift())}return t.fromUrl=function(e){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:return(n=r.sent()).ok?[4,n.arrayBuffer()]:[3,3];case 2:return[2,new t(r.sent())];case 3:throw new Error("could not load "+e)}}))}))},Object.defineProperty(t.prototype,"name",{get:function(){return this.header.name},set:function(t){this.header.name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=this.tracks.map((function(t){return t.duration}));return Math.max.apply(Math,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationTicks",{get:function(){var t=this.tracks.map((function(t){return t.durationTicks}));return Math.max.apply(Math,t)},enumerable:!0,configurable:!0}),t.prototype.addTrack=function(){var t=new u.Track(void 0,this.header);return this.tracks.push(t),t},t.prototype.toArray=function(){return a.encode(this)},t.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map((function(t){return t.toJSON()}))}},t.prototype.fromJSON=function(t){var e=this;this.header=new s.Header,this.header.fromJSON(t.header),this.tracks=t.tracks.map((function(t){var n=new u.Track(void 0,e.header);return n.fromJSON(t),n}))},t.prototype.clone=function(){var e=new t;return e.fromJSON(this.toJSON()),e},t}();e.Midi=c;var l=n(3);e.Track=l.Track;var h=n(0);e.Header=h.Header},function(t,e){function n(t){for(var e,n=new r(t),i=[];!n.eof();){var o=a();i.push(o)}return i;function a(){var t={};t.deltaTime=n.readVarInt();var r=n.readUInt8();if(240==(240&r)){if(255!==r){if(240==r)return t.type="sysEx",o=n.readVarInt(),t.data=n.readBytes(o),t;if(247==r)return t.type="endSysEx",o=n.readVarInt(),t.data=n.readBytes(o),t;throw"Unrecognised MIDI event type byte: "+r}t.meta=!0;var i=n.readUInt8(),o=n.readVarInt();switch(i){case 0:if(t.type="sequenceNumber",2!==o)throw"Expected length for sequenceNumber event is 2, got "+o;return t.number=n.readUInt16(),t;case 1:return t.type="text",t.text=n.readString(o),t;case 2:return t.type="copyrightNotice",t.text=n.readString(o),t;case 3:return t.type="trackName",t.text=n.readString(o),t;case 4:return t.type="instrumentName",t.text=n.readString(o),t;case 5:return t.type="lyrics",t.text=n.readString(o),t;case 6:return t.type="marker",t.text=n.readString(o),t;case 7:return t.type="cuePoint",t.text=n.readString(o),t;case 32:if(t.type="channelPrefix",1!=o)throw"Expected length for channelPrefix event is 1, got "+o;return t.channel=n.readUInt8(),t;case 33:if(t.type="portPrefix",1!=o)throw"Expected length for portPrefix event is 1, got "+o;return t.port=n.readUInt8(),t;case 47:if(t.type="endOfTrack",0!=o)throw"Expected length for endOfTrack event is 0, got "+o;return t;case 81:if(t.type="setTempo",3!=o)throw"Expected length for setTempo event is 3, got "+o;return t.microsecondsPerBeat=n.readUInt24(),t;case 84:if(t.type="smpteOffset",5!=o)throw"Expected length for smpteOffset event is 5, got "+o;var a=n.readUInt8();return t.frameRate={0:24,32:25,64:29,96:30}[96&a],t.hour=31&a,t.min=n.readUInt8(),t.sec=n.readUInt8(),t.frame=n.readUInt8(),t.subFrame=n.readUInt8(),t;case 88:if(t.type="timeSignature",4!=o)throw"Expected length for timeSignature event is 4, got "+o;return t.numerator=n.readUInt8(),t.denominator=1<<n.readUInt8(),t.metronome=n.readUInt8(),t.thirtyseconds=n.readUInt8(),t;case 89:if(t.type="keySignature",2!=o)throw"Expected length for keySignature event is 2, got "+o;return t.key=n.readInt8(),t.scale=n.readUInt8(),t;case 127:return t.type="sequencerSpecific",t.data=n.readBytes(o),t;default:return t.type="unknownMeta",t.data=n.readBytes(o),t.metatypeByte=i,t}}else{var s;if(0==(128&r)){if(null===e)throw"Running status byte encountered before status byte";s=r,r=e,t.running=!0}else s=n.readUInt8(),e=r;var u=r>>4;switch(t.channel=15&r,u){case 8:return t.type="noteOff",t.noteNumber=s,t.velocity=n.readUInt8(),t;case 9:var c=n.readUInt8();return t.type=0===c?"noteOff":"noteOn",t.noteNumber=s,t.velocity=c,0===c&&(t.byte9=!0),t;case 10:return t.type="noteAftertouch",t.noteNumber=s,t.amount=n.readUInt8(),t;case 11:return t.type="controller",t.controllerType=s,t.value=n.readUInt8(),t;case 12:return t.type="programChange",t.programNumber=s,t;case 13:return t.type="channelAftertouch",t.amount=s,t;case 14:return t.type="pitchBend",t.value=s+(n.readUInt8()<<7)-8192,t;default:throw"Unrecognised MIDI event type: "+u}}}}function r(t){this.buffer=t,this.bufferLen=this.buffer.length,this.pos=0}r.prototype.eof=function(){return this.pos>=this.bufferLen},r.prototype.readUInt8=function(){var t=this.buffer[this.pos];return this.pos+=1,t},r.prototype.readInt8=function(){var t=this.readUInt8();return 128&t?t-256:t},r.prototype.readUInt16=function(){return(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readInt16=function(){var t=this.readUInt16();return 32768&t?t-65536:t},r.prototype.readUInt24=function(){return(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readInt24=function(){var t=this.readUInt24();return 8388608&t?t-16777216:t},r.prototype.readUInt32=function(){return(this.readUInt8()<<24)+(this.readUInt8()<<16)+(this.readUInt8()<<8)+this.readUInt8()},r.prototype.readBytes=function(t){var e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e},r.prototype.readString=function(t){var e=this.readBytes(t);return String.fromCharCode.apply(null,e)},r.prototype.readVarInt=function(){for(var t=0;!this.eof();){var e=this.readUInt8();if(!(128&e))return t+e;t+=127&e,t<<=7}return t},r.prototype.readChunk=function(){var t=this.readString(4),e=this.readUInt32();return{id:t,length:e,data:this.readBytes(e)}},t.exports=function(t){var e=new r(t),i=e.readChunk();if("MThd"!=i.id)throw"Bad MIDI file.  Expected 'MHdr', got: '"+i.id+"'";for(var o=function(t){var e=new r(t),n={format:e.readUInt16(),numTracks:e.readUInt16()},i=e.readUInt16();return 32768&i?(n.framesPerSecond=256-(i>>8),n.ticksPerFrame=255&i):n.ticksPerBeat=i,n}(i.data),a=[],s=0;!e.eof()&&s<o.numTracks;s++){var u=e.readChunk();if("MTrk"!=u.id)throw"Bad MIDI file.  Expected 'MTrk', got: '"+u.id+"'";var c=n(u.data);a.push(c)}return{header:o,tracks:a}}},function(t,e){function n(t,e,n){var o,a=new i,s=e.length,u=null;for(o=0;o<s;o++)!1!==n.running&&(n.running||e[o].running)||(u=null),u=r(a,e[o],u,n.useByte9ForNoteOff);t.writeChunk("MTrk",a.buffer)}function r(t,e,n,r){var i=e.type,o=e.deltaTime,a=e.text||"",s=e.data||[],u=null;switch(t.writeVarInt(o),i){case"sequenceNumber":t.writeUInt8(255),t.writeUInt8(0),t.writeVarInt(2),t.writeUInt16(e.number);break;case"text":t.writeUInt8(255),t.writeUInt8(1),t.writeVarInt(a.length),t.writeString(a);break;case"copyrightNotice":t.writeUInt8(255),t.writeUInt8(2),t.writeVarInt(a.length),t.writeString(a);break;case"trackName":t.writeUInt8(255),t.writeUInt8(3),t.writeVarInt(a.length),t.writeString(a);break;case"instrumentName":t.writeUInt8(255),t.writeUInt8(4),t.writeVarInt(a.length),t.writeString(a);break;case"lyrics":t.writeUInt8(255),t.writeUInt8(5),t.writeVarInt(a.length),t.writeString(a);break;case"marker":t.writeUInt8(255),t.writeUInt8(6),t.writeVarInt(a.length),t.writeString(a);break;case"cuePoint":t.writeUInt8(255),t.writeUInt8(7),t.writeVarInt(a.length),t.writeString(a);break;case"channelPrefix":t.writeUInt8(255),t.writeUInt8(32),t.writeVarInt(1),t.writeUInt8(e.channel);break;case"portPrefix":t.writeUInt8(255),t.writeUInt8(33),t.writeVarInt(1),t.writeUInt8(e.port);break;case"endOfTrack":t.writeUInt8(255),t.writeUInt8(47),t.writeVarInt(0);break;case"setTempo":t.writeUInt8(255),t.writeUInt8(81),t.writeVarInt(3),t.writeUInt24(e.microsecondsPerBeat);break;case"smpteOffset":t.writeUInt8(255),t.writeUInt8(84),t.writeVarInt(5);var c=31&e.hour|{24:0,25:32,29:64,30:96}[e.frameRate];t.writeUInt8(c),t.writeUInt8(e.min),t.writeUInt8(e.sec),t.writeUInt8(e.frame),t.writeUInt8(e.subFrame);break;case"timeSignature":t.writeUInt8(255),t.writeUInt8(88),t.writeVarInt(4),t.writeUInt8(e.numerator);var l=255&Math.floor(Math.log(e.denominator)/Math.LN2);t.writeUInt8(l),t.writeUInt8(e.metronome),t.writeUInt8(e.thirtyseconds||8);break;case"keySignature":t.writeUInt8(255),t.writeUInt8(89),t.writeVarInt(2),t.writeInt8(e.key),t.writeUInt8(e.scale);break;case"sequencerSpecific":t.writeUInt8(255),t.writeUInt8(127),t.writeVarInt(s.length),t.writeBytes(s);break;case"unknownMeta":null!=e.metatypeByte&&(t.writeUInt8(255),t.writeUInt8(e.metatypeByte),t.writeVarInt(s.length),t.writeBytes(s));break;case"sysEx":t.writeUInt8(240),t.writeVarInt(s.length),t.writeBytes(s);break;case"endSysEx":t.writeUInt8(247),t.writeVarInt(s.length),t.writeBytes(s);break;case"noteOff":(u=(!1!==r&&e.byte9||r&&0==e.velocity?144:128)|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteOn":(u=144|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.noteNumber),t.writeUInt8(e.velocity);break;case"noteAftertouch":(u=160|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.noteNumber),t.writeUInt8(e.amount);break;case"controller":(u=176|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.controllerType),t.writeUInt8(e.value);break;case"programChange":(u=192|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.programNumber);break;case"channelAftertouch":(u=208|e.channel)!==n&&t.writeUInt8(u),t.writeUInt8(e.amount);break;case"pitchBend":(u=224|e.channel)!==n&&t.writeUInt8(u);var h=8192+e.value,f=127&h,p=h>>7&127;t.writeUInt8(f),t.writeUInt8(p);break;default:throw"Unrecognized event type: "+i}return u}function i(){this.buffer=[]}i.prototype.writeUInt8=function(t){this.buffer.push(255&t)},i.prototype.writeInt8=i.prototype.writeUInt8,i.prototype.writeUInt16=function(t){var e=t>>8&255,n=255&t;this.writeUInt8(e),this.writeUInt8(n)},i.prototype.writeInt16=i.prototype.writeUInt16,i.prototype.writeUInt24=function(t){var e=t>>16&255,n=t>>8&255,r=255&t;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r)},i.prototype.writeInt24=i.prototype.writeUInt24,i.prototype.writeUInt32=function(t){var e=t>>24&255,n=t>>16&255,r=t>>8&255,i=255&t;this.writeUInt8(e),this.writeUInt8(n),this.writeUInt8(r),this.writeUInt8(i)},i.prototype.writeInt32=i.prototype.writeUInt32,i.prototype.writeBytes=function(t){this.buffer=this.buffer.concat(Array.prototype.slice.call(t,0))},i.prototype.writeString=function(t){var e,n=t.length,r=[];for(e=0;e<n;e++)r.push(t.codePointAt(e));this.writeBytes(r)},i.prototype.writeVarInt=function(t){if(t<0)throw"Cannot write negative variable-length integer";if(t<=127)this.writeUInt8(t);else{var e=t,n=[];for(n.push(127&e),e>>=7;e;){var r=127&e|128;n.push(r),e>>=7}this.writeBytes(n.reverse())}},i.prototype.writeChunk=function(t,e){this.writeString(t),this.writeUInt32(e.length),this.writeBytes(e)},t.exports=function(t,e){if("object"!=typeof t)throw"Invalid MIDI data";e=e||{};var r,o=t.header||{},a=t.tracks||[],s=a.length,u=new i;for(function(t,e,n){var r=null==e.format?1:e.format,o=128;e.timeDivision?o=e.timeDivision:e.ticksPerFrame&&e.framesPerSecond?o=-(255&e.framesPerSecond)<<8|255&e.ticksPerFrame:e.ticksPerBeat&&(o=32767&e.ticksPerBeat);var a=new i;a.writeUInt16(r),a.writeUInt16(n),a.writeUInt16(o),t.writeChunk("MThd",a.buffer)}(u,o,s),r=0;r<s;r++)n(u,a[r],e);return u.buffer}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(0),s=i(n(9));function u(t,e){return{absoluteTime:t.ticks,channel:e,controllerType:t.number,deltaTime:0,type:"controller",value:Math.floor(127*t.value)}}function c(t){return{absoluteTime:0,channel:t.channel,deltaTime:0,programNumber:t.instrument.number,type:"programChange"}}e.encode=function(t){var e={header:{format:1,numTracks:t.tracks.length+1,ticksPerBeat:t.header.ppq},tracks:r([r([{absoluteTime:0,deltaTime:0,meta:!0,text:t.header.name,type:"trackName"}],t.header.keySignatures.map((function(t){return function(t){var e=a.keySignatureKeys.indexOf(t.key);return{absoluteTime:t.ticks,deltaTime:0,key:e+7,meta:!0,scale:"major"===t.scale?0:1,type:"keySignature"}}(t)})),t.header.meta.map((function(t){return{absoluteTime:(e=t).ticks,deltaTime:0,meta:!0,text:e.text,type:e.type};var e})),t.header.tempos.map((function(t){return function(t){return{absoluteTime:t.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/t.bpm),type:"setTempo"}}(t)})),t.header.timeSignatures.map((function(t){return function(t){return{absoluteTime:t.ticks,deltaTime:0,denominator:t.timeSignature[1],meta:!0,metronome:24,numerator:t.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}(t)})))],t.tracks.map((function(t){return r([(e=t.name,{absoluteTime:0,deltaTime:0,meta:!0,text:e,type:"trackName"}),c(t)],function(t){return s.default(t.notes.map((function(e){return function(t,e){return[{absoluteTime:t.ticks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOn",velocity:Math.floor(127*t.velocity)},{absoluteTime:t.ticks+t.durationTicks,channel:e,deltaTime:0,noteNumber:t.midi,type:"noteOff",velocity:Math.floor(127*t.noteOffVelocity)}]}(e,t.channel)})))}(t),function(t){for(var e=[],n=0;n<127;n++)t.controlChanges.hasOwnProperty(n)&&t.controlChanges[n].forEach((function(n){e.push(u(n,t.channel))}));return e}(t),function(t){var e=[];return t.pitchBends.forEach((function(n){e.push(function(t,e){return{absoluteTime:t.ticks,channel:e,deltaTime:0,type:"pitchBend",value:t.value}}(n,t.channel))})),e}(t));var e})))};return e.tracks=e.tracks.map((function(t){t=t.sort((function(t,e){return t.absoluteTime-e.absoluteTime}));var e=0;return t.forEach((function(t){t.deltaTime=t.absoluteTime-e,e=t.absoluteTime,delete t.absoluteTime})),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t})),new Uint8Array(o.writeMidi(e))}},function(t,e,n){"use strict";function r(t){return function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?t(i,n):n.push(i)}return n}(t,[])}function i(t,e){if("number"!=typeof e)throw new TypeError("Expected the depth to be a number");return function t(e,n,r){r--;for(var i=0;i<e.length;i++){var o=e[i];r>-1&&Array.isArray(o)?t(o,n,r):n.push(o)}return n}(t,[],e)}t.exports=function(t){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return r(t)},t.exports.from=r,t.exports.depth=function(t,e){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return i(t,e)},t.exports.fromDepth=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4);e.createControlChanges=function(){return new Proxy({},{get:function(t,e){return t[e]?t[e]:r.controlChangeIds.hasOwnProperty(e)?t[r.controlChangeIds[e]]:void 0},set:function(t,e,n){return r.controlChangeIds.hasOwnProperty(e)?t[r.controlChangeIds[e]]=n:t[e]=n,!0}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new WeakMap,i=function(){function t(t,e){r.set(this,e),this.ticks=t.absoluteTime,this.value=t.value}return Object.defineProperty(t.prototype,"time",{get:function(){return r.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=r.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},t}();e.PitchBend=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),i=new WeakMap,o=function(){function t(t,e){if(this.number=0,i.set(this,e),this.number=0,t){var n=t.find((function(t){return"programChange"===t.type}));n&&(this.number=n.programNumber)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.percussion?r.DrumKitByPatchID[this.number]:r.instrumentByPatchID[this.number]},set:function(t){var e=r.instrumentByPatchID.indexOf(t);-1!==e&&(this.number=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"family",{get:function(){return this.percussion?"drums":r.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percussion",{get:function(){return 9===i.get(this).channel},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{family:this.family,name:this.name,number:this.number}},t.prototype.fromJSON=function(t){this.number=t.number},t}();e.Instrument=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],e.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],e.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}},function(t,e,n){"use strict";function r(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]}Object.defineProperty(e,"__esModule",{value:!0});var i,o,a=(i=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,o={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},function(t){var e=i.exec(t),n=e[1],r=e[2];return o[n.toLowerCase()]+12*(parseInt(r,10)+1)}),s=new WeakMap,u=function(){function t(t,e,n){s.set(this,n),this.midi=t.midi,this.velocity=t.velocity,this.noteOffVelocity=e.velocity,this.ticks=t.ticks,this.durationTicks=e.ticks-t.ticks}return Object.defineProperty(t.prototype,"name",{get:function(){return t=this.midi,e=Math.floor(t/12)-1,r(t)+e.toString();var t,e},set:function(t){this.midi=a(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(t){var e=t-this.octave;this.midi+=12*e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return r(this.midi)},set:function(t){this.midi=12*(this.octave+1)+["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=s.get(this);return t.ticksToSeconds(this.ticks+this.durationTicks)-t.ticksToSeconds(this.ticks)},set:function(t){var e=s.get(this).secondsToTicks(this.time+t);this.durationTicks=e-this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return s.get(this).ticksToSeconds(this.ticks)},set:function(t){var e=s.get(this);this.ticks=e.secondsToTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bars",{get:function(){return s.get(this).ticksToMeasures(this.ticks)},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},t}();e.Note=u}])}))},{}]},["3syrK"],"3syrK");
//# sourceMappingURL=index.6c2b4b8b.js.map
